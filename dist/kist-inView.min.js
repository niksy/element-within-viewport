/*! kist-inView 0.6.2 - Check if elements are in viewport. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b,c){function d(b,c){var d={};return"number"==typeof b&&a.extend(d,{threshold:b}),"function"==typeof c&&a.extend(d,{success:c}),"object"==typeof b&&a.extend(d,b),d}function e(b){var c=a.extend({},q);return!b.success&&b.once&&(c.hasOnlyOnce=!0),c}function f(){return p.top=l.common.window.scrollTop(),p.bottom=p.top+l.common.window.height(),p}function g(a){var b=this.getElements(this.dom.el,this.options.threshold);b.length&&a(b)}function h(b,c,d){return this.options.debounce&&a.debounce?a.debounce(b,a.proxy(c,this,d)):a.proxy(c,this,d)}function i(a){this.privates.onceCalled||(this.options.once&&this.options.once.call(this.dom.el,a),this.privates.onceCalled=!0,this.privates.hasOnlyOnce&&this.destroy()),this.options.success&&this.options.success.call(this.dom.el,a)}function j(b,c){this.element=b,this.options=a.extend({},this.defaults,c),this.privates=e(this.options),n.setup.call(this),l.setup.call(this),m.setup.call(this,a.proxy(i,this)),setTimeout(a.proxy(g,this,a.proxy(i,this)),o)}var k={name:"inView",ns:{css:"kist-InView",event:".kist.inView"},error:function(a){throw new Error(k.name+": "+a)}};k.publicMethods=["destroy"];var l={common:{window:a(b)},setup:function(){this.dom=this.dom||{},this.dom.el=a(this.element)}},m={setup:function(a){l.common.window.on("scroll"+this.instance.ens+" resize"+this.instance.ens,h.call(this,this.options.debounce,g,a))},destroy:function(){l.common.window.off(this.instance.ens)}},n={id:0,setup:function(){this.instance=this.instance||{},this.instance.id=n.id++,this.instance.ens=k.ns.event+"."+this.instance.id},destroy:function(){this.dom.el.each(function(b,c){delete a.data(c)[k.name]})}},o=c.all&&!c.addEventListener?250:0,p={top:0,bottom:0},q={onceCalled:!1,hasOnlyOnce:!1};a.extend(j.prototype,{isVisible:function(a,b){var c=a.offset().top,d=c+a.height();return d>=p.top-b&&c<=p.bottom+b},getElements:function(b,c){return f(),b.filter(a.proxy(function(b,d){return this.isVisible(a(d),c)},this))},destroy:function(){n.destroy.call(this),m.destroy.call(this)},defaults:{threshold:0,debounce:300,success:null,once:null}});var r=j.prototype;a.kist=a.kist||{},a.kist[k.name]={defaults:r.defaults},a.fn[k.name]=function(b){if("string"==typeof b&&-1!==a.inArray(b,k.publicMethods))return this.each(function(){var c=a.data(this,k.name);c&&c[b]()});if(b=d.apply(null,arguments),b.success||b.once){var c=this.filter(function(){return!a.data(this,k.name)});return c.length&&c.data(k.name,new j(c,b)),this}return r.getElements(this,b.threshold||r.defaults.threshold)}}(jQuery,window,document);