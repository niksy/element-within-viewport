/*! kist-inView 0.5.1 - Check if elements are in viewport. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b){function c(){return j.top=h.common.window.scrollTop(),j.bottom=j.top+h.common.window.height(),j}function d(a){var b=this.getElements(this.dom.el,this.options.threshold);return b.length?a.call(null,b):void 0}function e(b,c,d){return this.options.debounce&&a.debounce?a.debounce(b,a.proxy(c,this,d)):a.proxy(c,this,d)}function f(b,c,d){this.element=b,this.options=a.extend({},this.defaults,c),g.instance.setup.call(this),h.setup.call(this),i.setup.call(this,d)}var g={name:"inView",ns:{css:"KistInView",event:".kist.inView"},instance:{id:0,setup:function(){this.instance=this.instance||{},this.instance.id=g.instance.id++,this.instance.ens=g.ns.event+"."+this.instance.id},destroy:function(){this.dom.el.each(function(b,c){delete a.data(c)[g.name]})}}},h={common:{window:a(b)},setup:function(){this.dom=this.dom||{},this.dom.el=a(this.element)}},i={setup:function(a){h.common.window.on("scroll"+this.instance.ens+" resize"+this.instance.ens,e.call(this,this.options.debounce,d,a))},destroy:function(){h.common.window.off(this.instance.ens)}},j={top:0,bottom:0};a.extend(f.prototype,{isVisible:function(a,b){var c=a.offset().top,d=c+a.height();return b=b||this.defaults.threshold,d>=j.top-b&&c<=j.bottom+b},getElements:function(b,d){return c(),b.filter(a.proxy(function(b,c){return this.isVisible(a(c),d)},this))},destroy:function(){g.instance.destroy.call(this),i.destroy.call(this)},defaults:{threshold:0,debounce:300,success:null}}),a.inView={defaults:f.prototype.defaults},a.fn.inView=function(b,c){return b=b||{},c=c||b.success,"number"==typeof b&&(b={threshold:b}),"string"==typeof b?this.each(function(){a.data(this,g.name)&&a.data(this,g.name)[b]()}):c?this.filter(function(b,c){return!a.data(c,g.name)}).data(g.name,new f(this,b,c)):f.prototype.getElements(this,b.threshold)}}(jQuery,window,document);