/*! kist-inView 0.6.3 - Check if elements are in viewport. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b,c){function d(b,c){var d={};return"number"==typeof b&&a.extend(d,{threshold:b}),"function"==typeof c&&a.extend(d,{success:c}),"object"==typeof b&&a.extend(d,b),d}function e(){return o.top=k.common.window.scrollTop(),o.bottom=o.top+k.common.window.height(),o}function f(a){var b=this.getElements(this.dom.el,this.options.threshold);b.length&&a(b)}function g(b,c,d){return this.options.debounce&&a.debounce?a.debounce(b,a.proxy(c,this,d)):a.proxy(c,this,d)}function h(a){var b,c=this.privates.onceEl;this.options.once&&c.length!==this.dom.el.length&&(b=a.filter(function(a,b){return!c.is(b)}),this.privates.onceEl=c.add(b),b.length&&this.options.once.call(this._element,b)),this.options.success&&this.options.success.call(this._element,a)}function i(b,c){this.element=b,this.options=a.extend({},this.defaults,c),this.privates=a.extend({},p),m.setup.call(this),k.setup.call(this),l.setup.call(this,a.proxy(h,this)),setTimeout(a.proxy(f,this,a.proxy(h,this)),n)}var j={name:"inView",ns:{css:"kist-InView",event:".kist.inView"},error:function(a){throw new Error(j.name+": "+a)}};j.publicMethods=["destroy"];var k={common:{window:a(b)},setup:function(){this.dom=this.dom||{},this.dom.el=a(this.element),this._element=this.dom.el.toArray()}},l={setup:function(a){k.common.window.on("scroll"+this.instance.ens+" resize"+this.instance.ens,g.call(this,this.options.debounce,f,a))},destroy:function(){k.common.window.off(this.instance.ens)}},m={id:0,setup:function(){this.instance=this.instance||{},this.instance.id=m.id++,this.instance.ens=j.ns.event+"."+this.instance.id},destroy:function(){this.dom.el.each(function(b,c){delete a.data(c)[j.name]})}},n=c.all&&!c.addEventListener?250:0,o={top:0,bottom:0},p={onceEl:a(),hasOnlyOnce:!1};a.extend(i.prototype,{isVisible:function(a,b){var c=a.offset().top,d=c+a.height();return d>=o.top-b&&c<=o.bottom+b},getElements:function(b,c){return e(),b.filter(a.proxy(function(b,d){return this.isVisible(a(d),c)},this))},destroy:function(){l.destroy.call(this),m.destroy.call(this)},defaults:{threshold:0,debounce:300,success:null,once:null}}),a.kist=a.kist||{},a.kist[j.name]={defaults:i.prototype.defaults},a.fn[j.name]=function(b){if("string"==typeof b&&-1!==a.inArray(b,j.publicMethods))return this.each(function(){var c=a.data(this,j.name);c&&c[b]()});if(b=d.apply(null,arguments),b.success||b.once){var c=this.filter(function(){return!a.data(this,j.name)});return c.length&&c.data(j.name,new i(c,b)),this}return i.prototype.getElements(this,b.threshold||i.prototype.defaults.threshold)}}(jQuery,window,document);